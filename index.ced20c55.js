var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},n={},a=e.parcelRequired7c6;null==a&&((a=function(e){if(e in t)return t[e].exports;if(e in n){var a=n[e];delete n[e];var r={id:e,exports:{}};return t[e]=r,a.call(r.exports,r,r.exports),r.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){n[e]=t},e.parcelRequired7c6=a);var r=a("k3DwN"),o=a("2shzp");const s=document.querySelector(".loader"),i=async(e="https://api.themoviedb.org/3/movie/popular",t=1)=>{s.style.display="block";try{const n=await o.default.get(e,{params:{api_key:"b942b8bf626a04f48b07153a95ee51a0",page:t,language:"en-US"}});return s.style.display="none",n}catch(e){s.style.display="none",console.log(e)}};var c=a("4bJs7");let l="";const d=e=>{const t=L();return((e,t)=>{l="",e.map((n=>{t.map((t=>{t.id===n&&(n!=e[e.length-1]?l=l+t.name+", ":l+=t.name)}))}))})(e.genre_ids,t.data.genres),`\n<div class="movie-card">\n<img class="movie-card__image" alt="${e.title} movie" src=${(0,c.imageExists)("https://image.tmdb.org/t/p/w500",e.poster_path)}>\n  <div class="movie-card__label">\n    <p class="movie-card__title">${e.title}</p>\n    <p class="movie-card__genre-year">${l} | ${(0,c.getMovieYear)(e.release_date)}</p> \n    <p class="movie-card__id">${e.id}</p> \n  </div>\n</div>\n`};var u=a("2nhTy"),p=a("hkaSy");const m=document.querySelector(".main-box");let g,v,y,b=1;const f=async(e,t=1)=>{try{b=t;let n=await i(e,b);y=await(0,r.getGenresList)(),m.innerHTML="",n.data.results.map((e=>{m.insertAdjacentHTML("beforeend",d(e))})),n.data.total_pages<500?u.getPaginationNumbers(n.data.total_pages):u.getPaginationNumbers(500),u.setCurrentPage(b),v=async()=>{u.setCurrentPage(b-1),n=await i(e,--b),m.innerHTML="",n.data.results.map((e=>{m.insertAdjacentHTML("beforeend",d(e))})),(0,p.onTopScroll)()},u.prevButton.addEventListener("click",v),g=async()=>{u.setCurrentPage(b+1),n=await i(e,++b),m.innerHTML="",n.data.results.map((e=>{m.insertAdjacentHTML("beforeend",d(e))})),(0,p.onTopScroll)()},u.nextButton.addEventListener("click",g),document.querySelectorAll(".pagination__number").forEach((t=>{const a=Number(t.getAttribute("page-index"));a&&t.addEventListener("click",(async()=>{u.setCurrentPage(a),b=a,n=await i(e,b),m.innerHTML="",n.data.results.map((e=>{m.insertAdjacentHTML("beforeend",d(e))})),(0,p.onTopScroll)()}))}))}catch(e){console.log("err ",e)}},h=()=>{u.nextButton.removeEventListener("click",g),u.prevButton.removeEventListener("click",v)},L=()=>y;r=a("k3DwN");const _=document.querySelector(".genres-menu__select"),T=document.querySelector(".genres-menu__clear");let w="https://api.themoviedb.org/3/movie/popular",E=[],S=1;T.addEventListener("click",(e=>{E.forEach((e=>document.getElementById(e).classList.remove("focused-genre"))),E=[],w="https://api.themoviedb.org/3/movie/popular",h(),f(w)})),(0,r.getGenresList)().then((e=>{for(let t=0;t<e.data.genres.length;t++){const n=document.createElement("button");n.classList.add("genre"),n.id=e.data.genres[t].id,n.innerText=e.data.genres[t].name,n.addEventListener("click",(()=>{n.classList.add("focused-genre"),0===E?E.push(e.data.genres[t].id):E.includes(e.data.genres[t].id)?E.forEach(((a,r)=>{a==e.data.genres[t].id&&(E.splice(r,1),n.classList.remove("focused-genre"))})):E.push(e.data.genres[t].id),E!==[]?(S=1,w="https://api.themoviedb.org/3/discover/movie?&with_genres="+encodeURI(E.join(","))):w="https://api.themoviedb.org/3/movie/popular",h(),f(w,S)})),_.append(n)}})),a("4VpTM"),a("1wewW");o=a("2shzp");const M=document.querySelector(".loader");async function k(e,t=1){M.style.display="block";try{const n=await o.default.get("https://api.themoviedb.org/3/search/movie",{params:{api_key:"b942b8bf626a04f48b07153a95ee51a0",query:`${e}`,page:t}});return M.style.display="none",n.data}catch(e){M.style.display="none",console.error(e)}}var H=a("eWCmQ");u=a("2nhTy"),p=a("hkaSy");const x=document.querySelector(".header__no-movies"),q=document.querySelector(".main-box"),A=document.querySelector("input[name='searchQuery']"),P=document.querySelector(".header__search-form-btn");let C=1;P.addEventListener("click",(async function(e){e.preventDefault(),x.innerHTML="",C=1;const t=A.value;if(t){let e=await k(t,C);e.results.length?(q.innerHTML="",e.results.map((e=>{q.insertAdjacentHTML("beforeend",d(e))})),e.total_pages<500?u.getPaginationNumbers(e.total_pages):u.getPaginationNumbers(500),u.setCurrentPage(C),u.prevButton.addEventListener("click",(async()=>{u.setCurrentPage(C-1),e=await k(t,--C),q.innerHTML="",e.results.map((e=>{q.insertAdjacentHTML("beforeend",d(e))})),(0,p.onTopScroll)()})),u.nextButton.addEventListener("click",(async()=>{u.setCurrentPage(C+1),e=await k(t,++C),q.innerHTML="",e.results.map((e=>{q.insertAdjacentHTML("beforeend",d(e))})),(0,p.onTopScroll)()})),document.querySelectorAll(".pagination__number").forEach((n=>{const a=Number(n.getAttribute("page-index"));a&&n.addEventListener("click",(async()=>{u.setCurrentPage(a),C=a,e=await k(t,C),q.innerHTML="",e.results.map((e=>{q.insertAdjacentHTML("beforeend",d(e))})),(0,p.onTopScroll)()}))}))):x.innerHTML="Search result not successful. Enter the correct movie name."}else H.Notify.info("Enter movie title")})),a("hkaSy"),a("9ZdO4"),a("2ix2C"),a("6mHu7"),f();
//# sourceMappingURL=index.ced20c55.js.map
